<template>
  <link rel="stylesheet" href="../../css/pages/attendance/attendance.css">

  <!-- Calendar Container -->
  <div class="calendar-container">
    <div class="calendar-header">
      <button id="prev-month">◀</button>
      <h2 id="current-month"></h2>
      <button id="next-month">▶</button>
    </div>

    <div class="calendar-today-btn">
      <button id="today-btn">Today</button>
    </div>

    <div class="calendar-grid" id="calendar-grid"></div>
  </div>

  <!-- Meeting Creation Modal -->
  <div id="meeting-modal" class="modal hidden">
    <div class="modal-content">
      <span id="close-modal" class="close">&times;</span>
      <h2>Create Meeting</h2>
      <form id="meeting-form">

        <!-- Meeting attributes -->
        <label>Meeting Title</label>
        <input type="text" id="meeting-title" required />

        <label>Date</label>
        <input type="date" id="meeting-date" required />

        <label>Time</label>
        <input type="time" id="meeting-time" required />

        <label>Meeting Type</label>
        <select id="meeting-type" required>
          <option>Lecture</option>
          <option>OH</option>
          <option>TA Check-In</option>
          <option>Team Meeting</option>
        </select>

        <!-- placeholder until integrated with backend/database -->
        <label>Participants</label>
        <div id="meeting-participants" class="participants-container">
          <label class="participant">
            <input type="checkbox" value="Alice">
            <span class="participant-name">Alice</span>
          </label>
          <label class="participant">
            <input type="checkbox" value="Bob">
            <span class="participant-name">Bob</span>
          </label>
          <label class="participant">
            <input type="checkbox" value="Charlie">
            <span class="participant-name">Charlie</span>
          </label>
          <label class="participant">
            <input type="checkbox" value="Diana">
            <span class="participant-name">Diana</span>
          </label>
          <label class="participant">
            <input type="checkbox" value="Eve">
            <span class="participant-name">Eve</span>
          </label>
        </div>

        <label>Description</label>
        <textarea id="meeting-description"></textarea>

        <!-- set up meeting recurrence -->
        <div class="recurring-card">
          <div class="recurring-header">
            <div class="recurring-copy">
              <p class="recurring-title">Recurring weekly</p>
              <p class="recurring-summary" id="recurring-summary">
                Select a date to preview the repeating schedule.
              </p>
            </div>
            <label class="recurring-toggle" for="recurring" aria-label="Toggle recurring weekly meetings">
              <input type="checkbox" id="recurring" class="recurring-checkbox" />
              <span class="recurring-slider" aria-hidden="true"></span>
            </label>
          </div>
          <div class="recurring-end">
            <label for="recurring-end-date">Repeat until</label>
            <input type="date" id="recurring-end-date" />
            <p class="recurring-hint">Meetings recur weekly up to and including this date.</p>
          </div>
        </div>

        <div class="modal-actions">
          <button type="submit">Create Meeting</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Meeting Details Modal, displayed after clicking on an existing meeting in the calendar -->
  <div id="meeting-content-modal-wrapper" class="modal hidden">
    <div id="meeting-content-modal" class="modal-content attendance-modal">
      <span id="close-meeting-content" class="close">&times;</span>

      <div class="attendance-container">
        
        <!-- Meeting metadata -->
        <div class="meeting-metadata">
          <h2 id="attendance-meeting-title">Meeting Title</h2>
          <p><strong>Date:</strong> <span id="attendance-meeting-date"></span></p>
          <p><strong>Time:</strong> <span id="attendance-meeting-time"></span></p>
          <p><strong>Type:</strong> <span id="attendance-meeting-type"></span></p>
          <p><strong>Description:</strong></p>
          <p id="attendance-meeting-desc"></p>
          <p><strong>Participants:</strong> <span id="attendance-meeting-participants"></span></p>
          <div class="meeting-metadata-actions" id="meeting-actions">
            <button id="delete-meeting" class="danger">Delete Meeting</button>
            <button id="delete-future-meetings" class="danger secondary" disabled>Delete This & Future</button>
          </div>
        </div>

        <!-- Attendance options -->
        <div class="attendance-options">
          <h3>Submit Attendance</h3>

          <!-- placeholder until integrated with backend/database -->
          <div class="qr-code-placeholder">
            <p>[QR CODE]</p>
          </div>
          <p>Or enter passcode:</p>
          <input type="text" id="attendance-passcode" placeholder="Enter passcode" />

          <button id="submit-attendance">Submit</button>
        </div>
      </div>
    </div>
  </div>
</template>
